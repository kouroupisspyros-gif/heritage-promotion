---
layout: default
load_leaflet: 1
---

<h1>{{ page.title }}</h1>
<img id="wikidata_img" style="width:100%; max-width:700px; border-radius:10px; margin:20px 0;">
<p id="wikidata_descr" style="font-size:1.1em; color:#444;"></p>

<div id="map" style="height:300px; margin-top:20px;"></div>

<script>
const wikidatum = '{{ page.wikidatum }}';
const url = `https://www.wikidata.org/wiki/Special:EntityData/${wikidatum}.json`;

fetch(url)
  .then(res => res.json())
  .then(data => {
    const entity = data.entities[wikidatum];
    const desc = entity.descriptions?.el?.value || entity.descriptions?.en?.value || '';
    const img = entity.claims?.P18 ? entity.claims.P18[0].mainsnak.datavalue.value : '';
    document.getElementById('wikidata_descr').innerText = desc;
    if (img) {
      document.getElementById('wikidata_img').src = 
        `https://commons.wikimedia.org/wiki/Special:FilePath/${encodeURIComponent(img)}?width=800`;
    }

    // Αν έχει συντεταγμένες (P625)
    const coords = entity.claims?.P625?.[0]?.mainsnak?.datavalue?.value;
    if (coords) {
      const lat = coords.latitude;
      const lon = coords.longitude;
      const map = L.map('map').setView([lat, lon], 15);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);
      L.marker([lat, lon]).addTo(map).bindPopup('{{ page.title }}').openPopup();
    }
  });
</script>
