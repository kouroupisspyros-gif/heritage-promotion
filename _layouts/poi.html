
---
layout: default
load_leaflet: 1
---

<h1 style="float:right; font-size:64pt; color:#f1f1f1">{{page.title}}</h1>
<h2 id="wikidata_title"></h2>
<h3 id="wikidata_descr"></h3>
<a id="wikidata_href" target="_blank"><img src = "https://upload.wikimedia.org/wikipedia/commons/archive/5/5a/20211013163259%21Wikipedia%27s_W.svg" alt="Wikipedia link" height="20px"/> <span id="wikipedia_title"> </a>
<p id="wikidata_location"></p>

<img id="wikidata_img" style="width:100%; padding-bottom:5px;" />

<div id="mapid" style="height:400px; width:100%; border-radius:10px; margin-top:20px;"></div>


{{ content }}

<img src="https://upload.wikimedia.org/wikipedia/commons/4/41/Wikidata_Stamp_Rec_Light.svg" style="float:right; width:100px" />

<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script>var wikidatum = '{{page.wikidatum}}'</script>
<script src="{{ '/assets/js/get_wiki_item.js' | relative_url }}"></script>

<script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
   integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
   crossorigin=""></script>
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js'></script>              
<script>
  // Παίρνουμε το Wikidata ID της σελίδας
  const wikidatum = '{{ page.wikidatum }}';

  // Κάνουμε αίτημα στα δεδομένα του Wikidata
  fetch(`https://www.wikidata.org/wiki/Special:EntityData/${wikidatum}.json`)
    .then(r => r.json())
    .then(data => {
      const e = data.entities[wikidatum];

      // Παίρνουμε περιγραφή
      const desc = e.descriptions?.el?.value || e.descriptions?.en?.value || '';
      document.getElementById('wikidata_descr').innerText = desc;

      // Παίρνουμε εικόνα
      const img = e.claims?.P18?.[0]?.mainsnak?.datavalue?.value;
      if (img) {
        document.getElementById('wikidata_img').src =
          `https://commons.wikimedia.org/wiki/Special:FilePath/${encodeURIComponent(img)}?width=800`;
      }

      // Παίρνουμε συντεταγμένες (latitude, longitude)
      const coord = e.claims?.P625?.[0]?.mainsnak?.datavalue?.value;
      const lat = coord?.latitude || 39.62;  // default Κέρκυρα
      const lon = coord?.longitude || 19.92;

      // Δημιουργούμε τον χάρτη ΜΟΝΟ ΜΙΑ ΦΟΡΑ
      const map = L.map('mapid', {
        fullscreenControl: true,
      }).setView([lat, lon], 14);

      // Προσθέτουμε layer από το OpenStreetMap
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);

      // Προσθέτουμε marker
      L.marker([lat, lon]).addTo(map)
        .bindPopup(`<b>${e.labels?.el?.value || e.labels?.en?.value || '{{ page.title }}'}</b><br>${desc}`)
        .openPopup();
    })
    .catch(err => console.error('Wikidata error:', err));
</script>

